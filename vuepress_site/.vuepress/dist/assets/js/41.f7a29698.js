(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{137:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._m(1),s("p"),t._m(2),s("p"),t._m(3),s("p",[t._v("The Carolina Auth plugin is installed in the starter project by default.\nIf you need to install it again, take the following steps:")]),t._m(4),s("p",[t._v("The route mapping should look like this:")]),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),t._m(12),s("p",[t._v("Will be presented to users who access an invalid or expired reset password\nor e-mail verification link. The template should explain this.")]),t._m(13),s("p",[t._v('Will be presented to users who need to reset their password. Should contain\na form sending a POST request with an input named "email" (for the user\'s\ne-mail address) and a hidden CSRF token.')]),t._m(14),s("p",[t._v("Will be presented to users that have completed the forgot password form. It\nshould explain to users that they have been sent an e-mail if the provided\ne-mail address\nbelonged to an account.")]),t._m(15),s("p",[t._v('The login form. Should contain a form sending a POST request with an input\nnamed "username", an input named "password, and a hidden CSRF token.')]),t._m(16),s("p",[t._v("The logout button. Should contain a form sending a POST request with a hidden\nCSRF token (and a message explain to the user that submitted will log them out).")]),t._m(17),s("p",[t._v('The registration form. Should contain form sending a POST request with\nan input named "username", an input\nnamed "email", an input named "password1", an input named "password2", and a\nhidden CSRF token.')]),t._m(18),t._m(19),t._m(20),s("p",[t._v('The form to create a new password for users who have forgotten theirs. Should\ncontain a form sending a POST request with an input named "password1", an\ninput named "password2" (which should be labeled Confirm Password), an a hidden\nCSRF token.')]),t._m(21),s("p",[t._v('A text template that will be used to send the reset password link to users.\nIt should be a nunjucks template that expects the properties "baseUrl"\nand "user". It should build the correct reset password link this way:')]),t._m(22),t._m(23),s("p",[t._v('A text template that will be used to send the e-mail verification link to\nusers. It should be a nunjucks template that expects the properties "baseUrl"\nand "user". It should build the correct e-mail verification lnk this way:')]),t._m(24),t._m(25),t._m(26),s("p",[t._v('The login page will contain a link to the registration page (and vice versa).\nThe login page will contain a link for users who have forgotten their password\nto receive an e-mail with a password reset link. Users who have successfully\nregistered will be redirected to the login page. Users who have logged in\nwill be redirected according to the configuration (to "/home" by default).\nUsers who log out will be redirected according to the configuration\n(to the login page by default).')]),t._m(27),t._m(28),s("p",[t._v('The Auth Service is exposed by the name "Carolina/Auth" in the Carolina\nService library:')]),t._m(29),s("p",[t._v("The Service contains some methods that you might use.")]),t._m(30),t._m(31),t._m(32),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("IMPORTANT")]),s("p",[t._v("The "),s("code",[t._v("login")]),t._v(" method does not actually add the User to the Session as logged in.\nTo do that, you must set the session value on the response.\nFor more information, see "),s("router-link",{attrs:{to:"./../auth/auth.html"}},[t._v("Authentication Basics")]),t._v(".")],1)]),t._m(33),t._m(34),t._m(35),t._m(36),t._m(37),t._m(38),t._m(39),t._m(40),s("p",[t._v("The Carolina/Auth Service exposes several Event classes that are thrown\nby the Service based on different events. You can configure Listeners to listen\nto them.")]),t._m(41),t._m(42),t._m(43),t._m(44),t._m(45),t._m(46),t._m(47),t._m(48),t._m(49),s("p",[t._v('The Carolina/Auth plugin exposes some Controller classes for use by the\nHttp Service. Their names all begin with "Carolina/Auth/" but they are not\ndesigned for re-use.')]),t._m(50),t._m(51),t._m(52),s("p",[t._v("This will protect routes from access by users that are not admin accounts.")]),t._m(53),s("p",[t._v("This will protect routes from access by users who are not logged in.")]),t._m(54),s("p",[t._v("This will protect routes from access by users who do not have verified e-mail\naddresses.")]),t._m(55),t._m(56),t._m(57),s("p",[t._v('The Carolina/Auth Service exposes some Validation Schemas. Their names all begin\nwith "Carolina/Auth/", but they are not documented for re-use.')])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"carolina-auth"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#carolina-auth","aria-hidden":"true"}},[this._v("#")]),this._v(" Carolina Auth")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The Carolina Auth plugin, known as "),e("code",[this._v("carolina/plugins/auth")]),this._v(", provides pages\nfor users to register accounts and log in to them, as well as some helpful\nMiddleware.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#installation"}},[this._v("Installation")])]),e("li",[e("a",{attrs:{href:"#configuration"}},[this._v("Configuration")])]),e("li",[e("a",{attrs:{href:"#usage"}},[this._v("Usage")])]),e("li",[e("a",{attrs:{href:"#details"}},[this._v("Details")]),e("ul",[e("li",[e("a",{attrs:{href:"#the-carolina-auth-service"}},[this._v("The Carolina/Auth Service")])]),e("li",[e("a",{attrs:{href:"#routes"}},[this._v("Routes")])]),e("li",[e("a",{attrs:{href:"#exposed-service-objects"}},[this._v("Exposed Service Objects")])])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[this._v("#")]),this._v(" Installation")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",[s("li",[t._v('List "carolina/plugins/auth" in the '),s("code",[t._v("plugins")]),t._v(" property of "),s("code",[t._v("config/app.js")]),t._v(".")]),s("li",[t._v("Run the command "),s("code",[t._v("node . import-plugin-resources carolina/plugins/auth -csrtf")]),t._v(".")]),s("li",[t._v("Ensure the file "),s("code",[t._v("config/carolina_auth.js")]),t._v(" is exposed by "),s("code",[t._v("config/index.js")]),t._v(' as "carolina_auth".')]),s("li",[t._v('Add the key "Carolina/Auth" to the '),s("code",[t._v("services")]),t._v(" property of "),s("code",[t._v("config/app.js")]),t._v(' with the value "carolina/plugins/auth/plugins/service".')]),s("li",[t._v("Provide a route mapping, for example in "),s("code",[t._v("site/http/routes/browser.js")]),t._v(" (example below).")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// site/http/routes/browser.js")]),t._v("\n\nexports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/auth"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" subs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'carolina/plugins/auth/router'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// more routes")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The Carolina Auth\nplugin is configured by the file "),e("code",[this._v("config/carolina_auth.js")]),this._v(". It is\nincluded in the starter project by default, and otherwise can be copied\nfrom the plugin code when you run the "),e("code",[this._v("import-plugin-resources")]),this._v(" command with\nthe "),e("code",[this._v("-c")]),this._v(" flag.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Configuration Values")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("table",[s("thead",[s("tr",[s("th",[t._v("Key")]),s("th",[t._v("Description")])])]),s("tbody",[s("tr",[s("td",[s("code",[t._v("allowRegistration")])]),s("td",[t._v("Whether or not the registration page is open for new user account creation.")])]),s("tr",[s("td",[s("code",[t._v("emailVerificationRedirect")])]),s("td",[t._v("Where to redirect user's after they click the e-mail verification link successfully.")])]),s("tr",[s("td",[s("code",[t._v("forgotEmailMailer")])]),s("td",[t._v("Which Mailer to use to send forgot password e-mails.")])]),s("tr",[s("td",[s("code",[t._v("forgotEmailSender")])]),s("td",[t._v("The FROM e-mail address for all forgot password e-mails.")])]),s("tr",[s("td",[s("code",[t._v("forgotEmailSubject")])]),s("td",[t._v("The Subject line for all forgot password e-mails.")])]),s("tr",[s("td",[s("code",[t._v("mount")])]),s("td",[t._v("The route to which this plugin's router is mounted. This plugin must know where it is.")])]),s("tr",[s("td",[s("code",[t._v("passwordRegex")])]),s("td",[t._v("A regular expression that user-created passwords must match.")])]),s("tr",[s("td",[s("code",[t._v("passwordRequirement")])]),s("td",[t._v("An explanation of password requirements which will be shown to users.")])]),s("tr",[s("td",[s("code",[t._v("loginRedirect")])]),s("td",[t._v("The default route to redirect users to once they successfully log in.")])]),s("tr",[s("td",[s("code",[t._v("logoutRedirect")])]),s("td",[t._v("The default route to redirect users to once they successfully log out.")])]),s("tr",[s("td",[s("code",[t._v("requireEmailVerification")])]),s("td",[t._v("Whether or not new users can log in without verifying their e-mail address first.")])]),s("tr",[s("td",[s("code",[t._v("sendEmailVerification")])]),s("td",[t._v("Whether or not new users will receive e-mail verification e-mails after they register.")])]),s("tr",[s("td",[s("code",[t._v("templates")])]),s("td",[t._v("Which template files to use for certain functions. More details below this table.")])]),s("tr",[s("td",[s("code",[t._v("throttle")])]),s("td",[t._v("Whether or not to throttle repeated login attempts.")])]),s("tr",[s("td",[s("code",[t._v("throttleAttemptLimit")])]),s("td",[t._v("How many failed login attempts triggers throttling.")])]),s("tr",[s("td",[s("code",[t._v("throttleBackoffTime")])]),s("td",[t._v("How long users must wait when throttled. An object that could be added to a "),s("code",[t._v("moment")]),t._v(" time.")])]),s("tr",[s("td",[s("code",[t._v("unauthorizedRedirect")])]),s("td",[t._v("Where users should be redirected to if they are rejected by the Middleware requiring login.")])]),s("tr",[s("td",[s("code",[t._v("usernameRegex")])]),s("td",[t._v("A regular expression that user-created usernames must match.")])]),s("tr",[s("td",[s("code",[t._v("usernameRequirement")])]),s("td",[t._v("An explanation of the username requirements which will be shown to users.")])]),s("tr",[s("td",[s("code",[t._v("verifyEmailSubject")])]),s("td",[t._v("The Subject line for e-mail verification e-mails.")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("Templates")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The Carolina Auth plugin contains several templates that are used for the\nlogin workflow. Instead of editing them in the "),e("code",[this._v("templates/carolina/auth")]),this._v("\n(which will get them overwritten if you re-install the plugin),\nyou can create your own and specify overrides in the "),e("code",[this._v("templates")]),this._v(" property of\n"),e("code",[this._v("config/carolina_auth.js")]),this._v(". Here are the templates you can override:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("badResetLink")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("forgot")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("forgotEmailSent")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("login")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("logout")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("register")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("registrationClosed")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Will be presented to users who go to the register page when the configuration\nvalue "),e("code",[this._v("allowRegistration")]),this._v(" is set to "),e("code",[this._v("false")]),this._v(". Should explain to the user that\nregistration is currently closed.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("resetPassword")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("resetPassEmail")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("{{ baseUrl }}/{{ user._id }}/{{ user.forgotPasswordToken }}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("emailVerificationEmail")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("{{ baseUrl }}/{{ user._id }}/{{ user.emailVerificationToken }}\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"usage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usage","aria-hidden":"true"}},[this._v("#")]),this._v(" Usage")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Once you mount the plugin to a route, that route will contain all the pages\nnecessary for users to login and logout. The link to log in to your side\nwill be "),e("code",[this._v("/<mount>/login")]),this._v(" and the link to the logout confirmation button will\nbe "),e("code",[this._v("/<mount>/logout")]),this._v('. The recommended (and default) mount point for this plugin\nis "/auth".')])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"details"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#details","aria-hidden":"true"}},[this._v("#")]),this._v(" Details")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"the-carolina-auth-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-carolina-auth-service","aria-hidden":"true"}},[this._v("#")]),this._v(" The Carolina/Auth Service")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" AuthSvc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Carolina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Carolina/Auth'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"check-a-username-password-combination"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#check-a-username-password-combination","aria-hidden":"true"}},[this._v("#")]),this._v(" Check a Username/Password Combination")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The "),e("code",[this._v("async login(identifier, password)")]),this._v(" method can be used to check a login\ncombination. The "),e("code",[this._v("identifier")]),this._v(' can either be a username or an e-mail address\n(if an "@" is present, it is assumed to be an e-mail address). If the\ncombination is valid, the User instance will be returned. Otherwise, the return\nvalue is '),e("code",[this._v("null")]),this._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" customLoginAttempt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" AuthSvc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"testuser"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password123"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("customLoginAttempt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Valid"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Invalid"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"register-a-new-user"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#register-a-new-user","aria-hidden":"true"}},[this._v("#")]),this._v(" Register a New User")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("The "),s("code",[t._v("async register(username, emailAddress, password)")]),t._v(" method can be used to\ncreate a new user account. An object will be returned with the "),s("code",[t._v("success")]),t._v(" key\nset to "),s("code",[t._v("true")]),t._v(" if registration was successful and a new account was created.\nThe "),s("code",[t._v("success")]),t._v(" property will be set to "),s("code",[t._v("false")]),t._v(" otherwise. The User object will\nbe attached as the "),s("code",[t._v("user")]),t._v(" property if the successful, otherwise the "),s("code",[t._v("message")]),t._v("\nproperty will be set with an explanation.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" customRegistrationResult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" AuthSvc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"testuser1000"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"testuser1000@example.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password123"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("customRegistrationResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("success "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newUser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" customRegistrationResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// more stuff")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Registration failed for the following reason:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("customRegistrationResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"routes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#routes","aria-hidden":"true"}},[this._v("#")]),this._v(" Routes")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("All routes are taken together and exposed by\n"),e("code",[this._v("carolina/plugins/auth/router.js")]),this._v(". You should map to it like so in\n"),e("code",[this._v("site/http/routes/browser.js")]),this._v(":")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/auth/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" subs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'carolina/plugins/auth/router'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// more routes")]),t._v("\n  \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"exposed-service-objects"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exposed-service-objects","aria-hidden":"true"}},[this._v("#")]),this._v(" Exposed Service Objects")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"event-classes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#event-classes","aria-hidden":"true"}},[this._v("#")]),this._v(" Event Classes")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[e("code",[this._v("Carolina/Auth/EmailVerificationEvent")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This event is fired when a User successfully verifies their e-mail address.\nThe user object is attached to the event as "),e("code",[this._v("event.user")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[e("code",[this._v("Carolina/Auth/LoginEvent")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This event is fired when a User successfully logs in. The User object is\nattached as "),e("code",[this._v("event.user")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[e("code",[this._v("Carolina/Auth/LoginFailureEvent")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This event is fired when there is a failed login attempt. The identifier of\nthe attempted login is attached as "),e("code",[this._v("event.identifier")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[e("code",[this._v("Carolina/Auth/RegistrationEvent")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This event is fired when a new User successfully registers a new account.\nThe User object is attached as "),e("code",[this._v("event.user")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"http-controllers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-controllers","aria-hidden":"true"}},[this._v("#")]),this._v(" Http Controllers")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"http-middleware"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-middleware","aria-hidden":"true"}},[this._v("#")]),this._v(" Http Middleware")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v('The Carolina/Auth plugin exposes some Middleware classes. Their names all begin\nwith "Carolina/Auth/" and some can be used by you. All of the "guard" middleware\nwith redirect unauthorized users to the value of '),e("code",[this._v("unauthorizedRedirect")]),this._v(" in\n"),e("code",[this._v("config/carolina_auth.js")]),this._v(' with the url of the attempted page attached under\nthe query arg "next" (overriding the default redirect if the user successfully\nlogs in immediately).')])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[e("code",[this._v("Carolina/Auth/AdminGuardMiddleware")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[e("code",[this._v("Carolina/Auth/AuthGuardMiddleware")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[e("code",[this._v("Carolina/Auth/EmailVerifiedGuardMiddleware")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[e("code",[this._v("Carolina/Auth/ExtractUserMiddleware")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This Middleware is applied to all browser requests by default. It inspects the\nSession for a logged in user and adds it to the incoming request object\nas "),e("code",[this._v("request.user")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"validation-schemas"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#validation-schemas","aria-hidden":"true"}},[this._v("#")]),this._v(" Validation Schemas")])}],!1,null,null,null);e.default=n.exports}}]);