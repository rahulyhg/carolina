(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{137:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),s("p",[t._v("The Carolina framework provides a global object called "),s("code",[t._v("Carolina")]),t._v(" that maintains\na library of Services which perform various functions.\nIt is recommended that you consult the documentation on the\n"),s("router-link",{attrs:{to:"./../docs/overview/service-library.html"}},[t._v("Carolina Global Object")]),t._v(".")],1),t._m(1),t._m(2),s("p",[t._v("Starting out, it should look something like this:")]),t._m(3),t._m(4),s("p",[t._v("For more information on configuring database connections, see the first section\nof the documentation on the "),s("router-link",{attrs:{to:"./../docs/db/db-service.html"}},[t._v("DB Service")]),t._v(".")],1),t._m(5),t._m(6),t._m(7),t._m(8),s("p",[t._v("The User Schema and Model class will work as-is for this tutorial application.")]),t._m(9),s("p",[t._v('We need to create another Model for our application, the "Item" model. This will\nrepresent specific items in a user\'s inventory.')]),s("p",[t._v("You can generate a new Model file by running the following command:")]),t._m(10),t._m(11),s("p",[t._v('By default, its Schema contains a "name" field. Sometimes you may want to\nremove this when creating a new Model, but in this case we will have\na name field. Let\'s define some more fields. Make the Schema class look\nlike this:')]),t._m(12),t._m(13),t._m(14),s("p",[t._v("This is all we need to do for the Item Schema, and we can leave the Item\nModel Class alone for now.")]),t._m(15),t._m(16),s("p",[t._v("This tells the DB Service to notice and register our new Model.")]),s("p",[t._v("For more information on defining Schemas and Model classes, consule the\ndocumentation on "),s("router-link",{attrs:{to:"./../docs/db/schemas.html"}},[t._v("Schemas and Fields")]),t._v(".")],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"database-models"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#database-models","aria-hidden":"true"}},[this._v("#")]),this._v(" Database & Models")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"database-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#database-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Database Configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v('Database access is controlled by the Carolina Service called "DB". Before\nusing it, let\'s take a look at the configuration for the service, found in\nthe file '),e("code",[this._v("config/db.js")]),this._v(".")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n  connections"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'JsonConnection'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./data/main/"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \n  connectionMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This is not at all a good configuration for a real application, but it will\nwork for testing out very simple applications. What this configuration is doing\nis saying that the default (and only) database connection involves just a bunch\nof JSON files stored in "),e("code",[this._v("data/main/")]),this._v('. We can leave it alone for now, but the\nCarolina framework includes an alternate connection driver called\n"MongoDbConnection" that can use to connect to a MongoDB instance.')])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"models"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#models","aria-hidden":"true"}},[this._v("#")]),this._v(" Models")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The DB Service maintains a library of model classes, which are\nclass-based representations of data in the database. There are some defined\nas a part of the framework, and some defined by you. You can create\nyour own models in the directory "),e("code",[this._v("site/db/models/")]),this._v(" and ensure that they\nare exported by the file "),e("code",[this._v("site/db/models/index.js")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"the-user-model"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-user-model","aria-hidden":"true"}},[this._v("#")]),this._v(" The User Model")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v('If you look, you will see the the "User" model is already defined in\n'),e("code",[this._v("site/db/models/user.js")]),this._v(". Models are broken into two parts, a Schema which\ndefines its various fields, and a Model class which is instantiated from\nthe database information and can contain instance methods. Generally, you\nshould leave the existing parts of the two classes alone, but you can\nadd more fields to the Schema and more methods to the Model class if\ndesired.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"the-item-model"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-item-model","aria-hidden":"true"}},[this._v("#")]),this._v(" The Item Model")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("node . generate model Item\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("This will create the file "),e("code",[this._v("site/db/models/item.js")]),this._v(". Take a look at it.")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ItemSchema")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseSchema")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("table "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fields"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"String"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fields"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Ref"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"User"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fields"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("description "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Text"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// list fields to be shown in admin panel here")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("adminFields "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v('Note that we added the "name" property to the '),e("code",[this._v("name")]),this._v(" field, and that we also\nadded the "),e("code",[this._v("name")]),this._v(" field to "),e("code",[this._v("adminFields")]),this._v(". The purpose of these two changes\nis specifically for the default admin panel, which will be covered later.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Additionally, note that the fields "),e("code",[this._v("_id")]),this._v(", "),e("code",[this._v("createdAt")]),this._v(", and "),e("code",[this._v("updatedAt")]),this._v(", will\nbe automatically added to the schema fields by the super constructor.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The next thing we need to do is export the Item Model from\n"),e("code",[this._v("site/db/models/index.js")]),this._v(". Make it look like this:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./item'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./user'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])}],!1,null,null,null);e.default=n.exports}}]);