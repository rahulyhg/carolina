(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{163:function(t,e,a){"use strict";a.r(e);var s=a(0),r=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"the-crypto-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-crypto-service","aria-hidden":"true"}},[t._v("#")]),t._v(" The Crypto Service")]),a("p",[t._v('The Carolina framework uses the "crypto" Node module combined with your\nCarolina secret for encrypting and decrypting values. For convenience, this\nis all wrapped up into a very simple Carolina Service called the Crypto\nService for any time you want to encrypt a value and be able to decrypt it\nlater (as long as you are in the same environment, ie, having the same\nCAROLINA_SECRET env variable).')]),a("p",[t._v("You can get a reference to the Crypto Service from the Carolina global\nobject:")]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" CryptoSvc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Carolina"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Crypto'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"site-secret"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#site-secret","aria-hidden":"true"}},[t._v("#")]),t._v(" Site Secret")]),a("p",[t._v("If you were following the instructions for starting a new project, you\nprobably already created a CAROLINA_SECRET environment variable using the\ncommand "),a("code",[t._v("node . generate-key")]),t._v(". This is important. The CAROLINA_SECRET\nenvironment variable is in the configuration as "),a("code",[t._v("app.secret")]),t._v(". This is used\nfor encryption and decryption.")]),a("h2",{attrs:{id:"using-the-crypto-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-the-crypto-service","aria-hidden":"true"}},[t._v("#")]),t._v(" Using the Crypto Service")]),a("h3",{attrs:{id:"encryption"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#encryption","aria-hidden":"true"}},[t._v("#")]),t._v(" Encryption")]),a("p",[t._v("To encrypt a value:")]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I love you."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" encrypted "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CryptoSvc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encryptText")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do something with encrypted text")]),t._v("\n")])])]),a("h3",{attrs:{id:"decryption"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#decryption","aria-hidden":"true"}},[t._v("#")]),t._v(" Decryption")]),a("p",[t._v("To decrypt a value that was encrypted that way:")]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get the encrypted text")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" encryptedMessage "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" decryptedMessage "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CryptoSvc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("decryptText")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("encryptedMessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// => "I love you."')]),t._v("\n")])])])])}],!1,null,null,null);e.default=r.exports}}]);