(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{138:function(t,a,s){"use strict";s.r(a);var e=s(0),n=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"carolina-admin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#carolina-admin","aria-hidden":"true"}},[t._v("#")]),t._v(" Carolina Admin")]),s("p",[t._v("The Carolina Admin plugin, known as "),s("code",[t._v("carolina/plugins/admin")]),t._v(", is a plugin\nwhich provides an Admin panel for managing objects in the database and\nperforming other administrative tasks.")]),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#installation"}},[t._v("Installation")])]),s("li",[s("a",{attrs:{href:"#configuration"}},[t._v("Configuration")])]),s("li",[s("a",{attrs:{href:"#usage"}},[t._v("Usage")])]),s("li",[s("a",{attrs:{href:"#details"}},[t._v("Details")]),s("ul",[s("li",[s("a",{attrs:{href:"#admin-service"}},[t._v("Admin Service")])]),s("li",[s("a",{attrs:{href:"#routes"}},[t._v("Routes")])]),s("li",[s("a",{attrs:{href:"#exported-objects"}},[t._v("Exported Objects")])])])])])]),s("p"),s("h2",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[t._v("#")]),t._v(" Installation")]),s("p",[t._v("The Carolina Admin plugin is installed in the starter project by default.\nIf you need to install it again, take the following steps:")]),s("ol",[s("li",[t._v('List "carolina/plugins/admin" in the '),s("code",[t._v("plugins")]),t._v(" property of "),s("code",[t._v("config/app.js")]),t._v(".")]),s("li",[t._v("Run the command "),s("code",[t._v("node . import-plugin-resources carolina/plugins/admin -csrtf")]),t._v(".")]),s("li",[t._v("Ensure the file "),s("code",[t._v("config/carolina_admin.js")]),t._v(" is exposed by "),s("code",[t._v("config/index.js")]),t._v(' as "carolina_admin".')]),s("li",[t._v('Add the key "Carolina/Admin" to the '),s("code",[t._v("services")]),t._v(" property of "),s("code",[t._v("config/app.js")]),t._v(' with the value "carolina/plugins/admin/service".')]),s("li",[t._v("Provide a route mapping, for example in "),s("code",[t._v("site/http/routes/browser.js")]),t._v(" (example below).")]),s("li",[t._v("Rebuild the frontend code, if necessary: "),s("code",[t._v("webpack --config src/carolina/admin/webpack.config.js")]),t._v(".")])]),s("p",[t._v("The route mapping should look like this:")]),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// site/http/routes/browser.js")]),t._v("\n\nexports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/admin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" subs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'carolina/plugins/admin/router'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// more routes")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("The command in step 6 is executed by "),s("code",[t._v("npm run webpack:admin")]),t._v(" by default in\nthe starter project.")]),s("h2",{attrs:{id:"configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[t._v("#")]),t._v(" Configuration")]),s("p",[t._v("The Admin plugin is configured by the file "),s("code",[t._v("config/carolina_admin.js")]),t._v(". It is\nincluded in the starter project by default, and otherwise can be copied\nfrom the plugin code when you run the "),s("code",[t._v("import-plugin-resources")]),t._v(" command with\nthe "),s("code",[t._v("-c")]),t._v(" flag.")]),s("p",[t._v("The "),s("code",[t._v("sections")]),t._v(" property is a list of sections that should be available in the\nadmin panel. Each section should have a "),s("code",[t._v("name")]),t._v(", a font-awesome "),s("code",[t._v("icon")]),t._v(",\na list of "),s("code",[t._v("models")]),t._v(" that should be managed in that section, and an optional\n"),s("code",[t._v("description")]),t._v(".")]),s("p",[t._v("The "),s("code",[t._v("modelActions")]),t._v(" property is an object mapping the names of Model classes\nto the collection Actions and model Actions that should be associated with the\nModel in the admin panel. See below (in the Details section)\nfor more details on Action classes.")]),s("h2",{attrs:{id:"usage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usage","aria-hidden":"true"}},[t._v("#")]),t._v(" Usage")]),s("p",[t._v("It is recommended that you route your admin panel to "),s("code",[t._v("/admin/")]),t._v(" as shown above.")]),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("IMPORTANT")]),s("p",[t._v('It is important that you visit your admin panel and link to it as\n"http://yoursite/admin/" (including the '),s("em",[s("strong",[t._v("trailing slash")])]),t._v(").")])]),s("p",[t._v("When you visit the admin panel (which requires you to log in or be logged in as\nan admin user), you will be presented with a panel with various section\nlisted on the sidebar. In each section, you will see Model classes that you can\nmanage.")]),s("p",[t._v("If you click on a Model class, you will see a paginated view of all\nobjects of that model in the database. At the bottom of this view, you will\nalso see forms for any "),s("em",[t._v("collection-level")]),t._v(" Actions assigned to that Model class.\nThese actions may be things such as dropping the table, or creating several\nnew instances. If you click on a specific Model instance you will see the\ninstance view - which will also allow you to edit or delete a specific instance.\nAt the bottom of the instance view, you will see any "),s("em",[t._v("instance-level")]),t._v(" Actions\nassigned to that Model class.")]),s("h2",{attrs:{id:"details"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#details","aria-hidden":"true"}},[t._v("#")]),t._v(" Details")]),s("h3",{attrs:{id:"admin-service"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#admin-service","aria-hidden":"true"}},[t._v("#")]),t._v(" Admin Service")]),s("p",[t._v('The Admin Service is available as "Carolina/Admin":')]),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" CarolinaAdminSvc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Carolina"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Carolina/Admin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v('You should not need to use this service directly, but it manages a library\nof singleton objects called "Actions".')]),s("h4",{attrs:{id:"actions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#actions","aria-hidden":"true"}},[t._v("#")]),t._v(" Actions")]),s("p",[t._v("Actions represent command that take input from forms provided to admin users\nin the Admin panel and then execute against a specific Model instance or\nthe entire collection of a Model. They then return a response.")]),s("p",[t._v("If you want to write and use your own actions, create the file\n"),s("code",[t._v("site/carolina_admin/actions/index.js")]),t._v(" and expose Action classes that your\nwrite.")]),s("p",[t._v("Here is an annonated example of an Action class included with the plugin,\na "),s("em",[t._v("collection-level")]),t._v(" Action which deletes all instances in a collection:")]),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" BaseAction "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'carolina/plugins/admin/plugin/carolina_admin/base-action'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// must extend BaseAction")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DropTableAction")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseAction")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reference a Schema by name, which describes the user input form")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("schemaName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Carolina/Admin/AreYouSureSchema'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// user friendly name")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Drop Table"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// user friendly description")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("description "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Deletes ALL items in this model."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// handle method takes the user-provided arguments and the given model class")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Model")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" allInstances "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$all")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" allInstances"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" allInstances"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_delete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// return value must have success and message")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      success"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Instances deleted."')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nexports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" DropTableAction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("In an Action class, you provide a schemaName which must reference a Schema.\nThe Schema will be used to build the form in the admin panel and validate\nits user input. When a user submits a form for a "),s("em",[t._v("collection-level")]),t._v(" Action,\nthe "),s("code",[t._v("handle")]),t._v(" method will be called with the user provided input and the\nModel class. When a user submits a form for an "),s("em",[t._v("instance-level")]),t._v(" Action,\nthe "),s("code",[t._v("handle")]),t._v(" method will be called with the user provided input, the Model\nclass, and the specific\nModel instance.")]),s("p",[t._v("Here is an example of an "),s("em",[t._v("instance-level")]),t._v(" Acton, which is included in the\nCarolina Admin plugin, which sets a User's password to a given value:")]),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" BaseAction "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'carolina/plugins/admin/plugin/carolina_admin/base-action'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// extend BaseAction")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SetPasswordAction")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseAction")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("schemaName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Carolina/Admin/PasswordSchema'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Set User password."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("description "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sets the user\'s password to the given value."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// operate on specific instance")]),t._v("\n    user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPassword")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_save")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// return object with success and message")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      success"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Password reset."')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nexports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SetPasswordAction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("There is nothing in the Action class specifying that it is a collection-level\nor instance-level Action, nor what Models it should be used against.")]),s("p",[t._v("Your Action classes should be exposed by name in\n"),s("code",[t._v("site/carolina_admin/actions/index.js")]),t._v(". Your Actions will be collected and\nmanaged by the Carolina/Admin Service.")]),s("p",[t._v("In the "),s("code",[t._v("config/carolina_admin.js")]),t._v(", there is an object mapping Model names to\nnames for Actions that should be associated with it (both at the instance\nand collection levels). You can simply add the name of your new Action\nto a Model class under either level and it will be available in the\nadmin panel.")]),s("p",[t._v("Action classes that are included with the plugin are listed and described\nfurther below.")]),s("h3",{attrs:{id:"routes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#routes","aria-hidden":"true"}},[t._v("#")]),t._v(" Routes")]),s("p",[t._v("All routes are taken together and exposed by\n"),s("code",[t._v("carolina/plugins/admin/router.js")]),t._v(". You should map to it like so in\n"),s("code",[t._v("site/http/routes/browser.js")]),t._v(":")]),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/admin/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" subs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'carolina/plugins/admin/router'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// more routes")]),t._v("\n  \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("This makes your entire admin panel available at "),s("code",[t._v("http://yoursite/admin/")]),t._v(".")]),s("h3",{attrs:{id:"exported-objects"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exported-objects","aria-hidden":"true"}},[t._v("#")]),t._v(" Exported Objects")]),s("h4",{attrs:{id:"admin-actions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#admin-actions","aria-hidden":"true"}},[t._v("#")]),t._v(" Admin Actions")]),s("p",[t._v("The Carolina Admin Service manages Action classes, and provides the following\nones by default:")]),s("p",[s("strong",[s("code",[t._v("Carolina/Admin/CreateTestUsersActions")])])]),s("p",[t._v("This is designed for use only as a "),s("em",[t._v("collection-level")]),t._v(" Action for the User\nModel. It presents a form asking for a Username Prefix, a starting Password,\nand Count. When executed,\nit will create a given numbers of user accounts, with the\ngiven password.")]),s("p",[t._v('For example, if the username prefix is "testuser" and the count is 10,\nit will create user accounts from "testuser0" to "testuser9".')]),s("p",[s("strong",[s("code",[t._v("Carolina/Admin/DeleteNonAdminAction")])])]),s("p",[t._v("This is designed for use only as a "),s("em",[t._v("collection-level")]),t._v(" Action for the User\nModel. It presents a form asking that you are sure you want to do this.\nIt will delete all Users that have their "),s("code",[t._v("isAdmin")]),t._v(" property set to "),s("code",[t._v("false")]),t._v(".")]),s("p",[s("strong",[s("code",[t._v("Carolina/Admin/DropTableAction")])])]),s("p",[t._v("This is designed for use as a "),s("em",[t._v("collection-level")]),t._v(" Action against "),s("em",[t._v("any")]),t._v(" Model\nclass. It will delete all items in the collection.")]),s("p",[s("strong",[s("code",[t._v("Carolina/Admin/EmailUserAction")])])]),s("p",[t._v("This is designed for use only as an "),s("em",[t._v("instance-level")]),t._v(" Action for the User Model.\nIt allows you to construct a quick e-mail that will be sent using the\ndefault Mailer to the e-mail address on file for that specific user.")]),s("p",[s("strong",[s("code",[t._v("Carolina/Admin/SetPasswordAction")])])]),s("p",[t._v("This is designed for use only as an "),s("em",[t._v("instance-level")]),t._v(" Action for the User Model.\nIt allows you to reset a user's password to a specific value.")]),s("h4",{attrs:{id:"http-controllers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-controllers","aria-hidden":"true"}},[t._v("#")]),t._v(" Http Controllers")]),s("p",[t._v('The Carolina Admin plugin exposes some Controller classes for use by the\nHttp Service. Their names all begin with "Carolina/Admin/" but they are not\ndesigned for re-use.')]),s("h4",{attrs:{id:"terminal-commands"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#terminal-commands","aria-hidden":"true"}},[t._v("#")]),t._v(" Terminal Commands")]),s("p",[s("strong",[s("code",[t._v("Carolina/Admin/CreateAdminUserCommand")])])]),s("p",[t._v("This Command allows you to use the CLI to create a new User account with\nadmin powers.")]),s("p",[t._v("Usage:")]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("node . create-admin-user -u USERNAME -p PASSWORD -e EMAIL_ADDRESS\n")])])]),s("p",[t._v('All the args are optional: the default username is "admin", the default\npassword is "password123", and the default e-mail address is\n"admin@example.com".')]),s("h4",{attrs:{id:"validation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#validation","aria-hidden":"true"}},[t._v("#")]),t._v(" Validation")]),s("p",[t._v("The Carolina Admin plugin exposes some Schemas for use by the Validation\nService, and they are used by Actions to validate user input and present\nforms in the admin panel.")]),s("p",[t._v('Their names all begin with "Carolina/Admin/". The ones designed for re-use are\nlisted here.')]),s("p",[s("strong",[s("code",[t._v("Carolina/Admin/AreYouSureSchema")])])]),s("p",[t._v("This schema is made up of a single property: "),s("code",[t._v("sure")]),t._v(". It is a Boolean property\nthat is required to be set to "),s("code",[t._v("true")]),t._v(" for an object to pass validation.\nFree free to use it as the schema for an Action class if all you need from the\nuser is positive confirmation that they want the Action to occur.")])])}],!1,null,null,null);a.default=n.exports}}]);