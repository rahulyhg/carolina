<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Logging | Carolina Documentation</title>
    <meta name="description" content="Documentation for the Carolina web framework.">
    
    
    <link rel="preload" href="/assets/css/styles.4c99cee3.css" as="style"><link rel="preload" href="/assets/js/app.4c99cee3.js" as="script"><link rel="preload" href="/assets/js/18.2bf4752f.js" as="script"><link rel="prefetch" href="/assets/js/1.1cf9f1db.js"><link rel="prefetch" href="/assets/js/10.67736b9c.js"><link rel="prefetch" href="/assets/js/11.7beeac27.js"><link rel="prefetch" href="/assets/js/12.8ffce904.js"><link rel="prefetch" href="/assets/js/13.54a86374.js"><link rel="prefetch" href="/assets/js/14.f6222131.js"><link rel="prefetch" href="/assets/js/15.60843f1a.js"><link rel="prefetch" href="/assets/js/16.3bab9827.js"><link rel="prefetch" href="/assets/js/17.371a0e2c.js"><link rel="prefetch" href="/assets/js/19.d7b2b433.js"><link rel="prefetch" href="/assets/js/2.d296c8c8.js"><link rel="prefetch" href="/assets/js/20.84f7874a.js"><link rel="prefetch" href="/assets/js/21.b063a67b.js"><link rel="prefetch" href="/assets/js/22.75e8e46c.js"><link rel="prefetch" href="/assets/js/23.c3543ea8.js"><link rel="prefetch" href="/assets/js/24.5c5f18c8.js"><link rel="prefetch" href="/assets/js/25.64098a0b.js"><link rel="prefetch" href="/assets/js/26.e2acfd13.js"><link rel="prefetch" href="/assets/js/27.aff06937.js"><link rel="prefetch" href="/assets/js/28.8bc12e94.js"><link rel="prefetch" href="/assets/js/29.c7890b85.js"><link rel="prefetch" href="/assets/js/3.79b6242f.js"><link rel="prefetch" href="/assets/js/30.1c7523a4.js"><link rel="prefetch" href="/assets/js/31.41d153ce.js"><link rel="prefetch" href="/assets/js/32.076ea23e.js"><link rel="prefetch" href="/assets/js/33.4df50c49.js"><link rel="prefetch" href="/assets/js/34.afd39df7.js"><link rel="prefetch" href="/assets/js/35.96ad804d.js"><link rel="prefetch" href="/assets/js/36.4b18f55f.js"><link rel="prefetch" href="/assets/js/37.785cf241.js"><link rel="prefetch" href="/assets/js/38.8ff035ad.js"><link rel="prefetch" href="/assets/js/39.e0c013ee.js"><link rel="prefetch" href="/assets/js/4.455a7b47.js"><link rel="prefetch" href="/assets/js/40.141dd392.js"><link rel="prefetch" href="/assets/js/41.c0c4f533.js"><link rel="prefetch" href="/assets/js/42.a505c995.js"><link rel="prefetch" href="/assets/js/43.9538af71.js"><link rel="prefetch" href="/assets/js/44.4a09b0cb.js"><link rel="prefetch" href="/assets/js/45.01328d52.js"><link rel="prefetch" href="/assets/js/46.d54fdc6d.js"><link rel="prefetch" href="/assets/js/47.93af6532.js"><link rel="prefetch" href="/assets/js/48.3aecbfc9.js"><link rel="prefetch" href="/assets/js/49.030d249e.js"><link rel="prefetch" href="/assets/js/5.39ac8b79.js"><link rel="prefetch" href="/assets/js/50.830dbfe7.js"><link rel="prefetch" href="/assets/js/51.8883ddf5.js"><link rel="prefetch" href="/assets/js/52.0e11daf2.js"><link rel="prefetch" href="/assets/js/53.fc4fea9f.js"><link rel="prefetch" href="/assets/js/54.224ab9d2.js"><link rel="prefetch" href="/assets/js/55.57f73974.js"><link rel="prefetch" href="/assets/js/56.f67ded59.js"><link rel="prefetch" href="/assets/js/6.53b715ea.js"><link rel="prefetch" href="/assets/js/7.3c48cb9f.js"><link rel="prefetch" href="/assets/js/8.23ab337a.js"><link rel="prefetch" href="/assets/js/9.01843353.js">
    <link rel="stylesheet" href="/assets/css/styles.4c99cee3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Carolina Documentation
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Documentation</a></div><div class="nav-item"><a href="/tutorials/" class="nav-link">Tutorial</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Documentation</a></div><div class="nav-item"><a href="/tutorials/" class="nav-link">Tutorial</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Getting Started</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Framework Overview</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Basics</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/docs/basics/routing.html" class="sidebar-link">Routing</a></li><li><a href="/docs/basics/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/docs/basics/csrf.html" class="sidebar-link">CSRF Tokens </a></li><li><a href="/docs/basics/controllers.html" class="sidebar-link">Controller Classes</a></li><li><a href="/docs/basics/requests.html" class="sidebar-link">HTTP Request Objects</a></li><li><a href="/docs/basics/responses.html" class="sidebar-link">HTTP Response Objects</a></li><li><a href="/docs/basics/template-views.html" class="sidebar-link">Template Views</a></li><li><a href="/docs/basics/session.html" class="sidebar-link">Session</a></li><li><a href="/docs/basics/validation.html" class="sidebar-link">Validation</a></li><li><a href="/docs/basics/errors.html" class="sidebar-link">Exceptions</a></li><li><a href="/docs/basics/logging.html" class="active sidebar-link">Logging</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/basics/logging.html#configuring-log-channels" class="sidebar-link">Configuring Log Channels</a></li><li class="sidebar-sub-header"><a href="/docs/basics/logging.html#writing-logs" class="sidebar-link">Writing Logs</a></li></ul></li><li><a href="/docs/basics/pug.html" class="sidebar-link">Pug Templates</a></li><li><a href="/docs/basics/crypto.html" class="sidebar-link">The Crypto Service</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Authentication</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Advanced</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Databases</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Included Plugins</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="logging"><a href="#logging" aria-hidden="true" class="header-anchor">#</a> Logging</h1><p>The Logger Service facilitates writing logs. It does so by checking the various
Loggers that it maintains (which you configure) and sending log entries to each
Logger that should record it. This makes it easy to log things throughout
your application (at various levels) and editing the Logger configuration
to determine which logs will actually get recorded and how.</p><p>The Logger Service is available from the Carolina global object:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> LoggerSvc <span class="token operator">=</span> Carolina<span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'Logger'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="configuring-log-channels"><a href="#configuring-log-channels" aria-hidden="true" class="header-anchor">#</a> Configuring Log Channels</h2><p>The Logger Service sends logs to logger channels, each of which is an instance
of some type of Logger class which is designed for writing logs in various
ways.</p><p>The configuration for logger channels is found in the <code>logChannels</code> property
of <code>config/logger.js</code>. It is an object which maps logger names to objects
that will be used to create Logger instances. The actual Logger class used
is specified by the property <code>driver</code>. Each logger configuration object
in the configuration must at least specify the <code>driver</code> and the <code>level</code>.
Levels will be explained in more detail further below. The objects may
also specify <code>sources</code>, an array of strings. If provided, only log entries
from those named sources will be used. Source names are arbitrary and are
specified when writing log entries, but internally the Carolina framework
uses Service names as the source of all log entries it sends.</p><p>In addition to those properties, some actual driver types for logger channels
may have other configuration options available.</p><p>Example configuration:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code>exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  logChannels<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      driver<span class="token punctuation">:</span> <span class="token string">'TerminalLogger'</span><span class="token punctuation">,</span>
      level<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// all log levels</span>
      useColors<span class="token punctuation">:</span> <span class="token boolean">true</span>
      <span class="token comment">// logs from all sources</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    httpLogs<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      driver<span class="token punctuation">:</span> <span class="token string">'FileLogger'</span><span class="token punctuation">,</span>
      level<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      filePattern<span class="token punctuation">:</span> <span class="token string">'http.[].txt'</span><span class="token punctuation">,</span> <span class="token comment">// the [] is replaced with the date</span>
      baseDir<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'storage'</span><span class="token punctuation">,</span> <span class="token string">'logs'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// this is the default</span>
      subDir<span class="token punctuation">:</span> <span class="token string">'http-logs'</span>
      <span class="token comment">// this logger will create files like storage/logs/http-logs/http.20181111.txt</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The above shows an example configuration using <code>TerminalLogger</code> instance and a
<code>FileLogger</code> instance, as well as configuration examples for each.</p><h3 id="specific-logger-types"><a href="#specific-logger-types" aria-hidden="true" class="header-anchor">#</a> Specific Logger Types</h3><p>For logger drivers, you can use any of these classes that come with the
framework.</p><p><strong>Logger Drivers</strong></p><table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>DbLogger</code></td><td>Writes log messages to the <code>log_entry</code> database table.</td></tr><tr><td><code>EmailLogger</code></td><td>Emails log messages.</td></tr><tr><td><code>FileLogger</code></td><td>Writes log messages to a daily file.</td></tr><tr><td><code>JsonPostLogger</code></td><td>Posts log messages to an API.</td></tr><tr><td><code>TerminalLogger</code></td><td>Writes log messages to the terminal output.</td></tr></tbody></table><p>Some Logger types have special configuration values you can use in
<code>config/logger.js</code>.</p><p><strong><code>DbLogger</code></strong></p><p>No additional configuration.</p><p><strong><code>EmailLogger</code></strong></p><ul><li><code>mailer</code>: <strong>String</strong>. The <code>mailer</code> to use. Defaults to &quot;default&quot;.</li><li><code>mailfrom</code>: <strong>String</strong>. The FROM e-mail address to use.</li><li><code>mailto</code>: <strong>String</strong>. The TO e-mail address to use.</li><li><code>subject</code>: <strong>String</strong>. The subject to use.</li></ul><p>Example:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  driver<span class="token punctuation">:</span> <span class="token string">&quot;EmailLogger&quot;</span><span class="token punctuation">,</span>
  level<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// WARN and ERROR levels only</span>
  mailer<span class="token punctuation">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
  mailfrom<span class="token punctuation">:</span> <span class="token string">&quot;webmaster@example.com&quot;</span><span class="token punctuation">,</span>
  mailto<span class="token punctuation">:</span> <span class="token string">&quot;logs@example.com&quot;</span><span class="token punctuation">,</span>
  subject<span class="token punctuation">:</span> <span class="token string">&quot;Error/Warning from your application.&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong><code>FileLogger</code></strong></p><ul><li><code>baseDir</code>: <strong>String</strong>. The base directory for log files. Defaults to <code>storage/logs</code>.</li><li><code>subDir</code>: <strong>String</strong>. The subdirectory to use.</li><li><code>filePattern</code>: <strong>String</strong>. The file name to write logs to. If &quot;[]&quot; is in the value, it will be replaced with the date and be a rotating log.</li></ul><p>Example:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  driver<span class="token punctuation">:</span> <span class="token string">'FileLogger'</span><span class="token punctuation">,</span>
  level<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  subDir<span class="token punctuation">:</span> <span class="token string">'daily'</span><span class="token punctuation">,</span>
  filePattern<span class="token punctuation">:</span> <span class="token string">'[].log'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong><code>JsonPostLogger</code></strong></p><ul><li><code>headers</code>: <strong>Object</strong>. Request headers to use. Defaults to <code>{ 'Content-Type': &quot;application/json&quot; }</code>.</li><li><code>url</code>: <strong>String</strong>. The URL to send POST requests to.</li></ul><p>Example:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  driver<span class="token punctuation">:</span> <span class="token string">'JsonPostLogger'</span><span class="token punctuation">,</span>
  level<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span> <span class="token string">'http://example.com/api/submit-log-entry'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong><code>TerminalLogger</code></strong></p><ul><li><code>useColors</code>: <strong>Boolean</strong>. Whether or not to use different colors for different levels when printing to console. Defaults to <code>false</code>.</li></ul><p>Example:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  driver<span class="token punctuation">:</span> <span class="token string">'TerminalLogger'</span><span class="token punctuation">,</span>
  level<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  useColors<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="log-levels"><a href="#log-levels" aria-hidden="true" class="header-anchor">#</a> Log Levels</h3><p>The following section will cover how to use the Logger Service to submit log
entries. Each log entry will need to have a level, a number from 0-5. They
correspond with standard NPM log levels (listed from most severe to lease
severe):</p><table><thead><tr><th>Level</th><th>Name</th><th>Color</th><th>Usage</th></tr></thead><tbody><tr><td>0</td><td>ERROR</td><td>Red</td><td>Use this for bad errors. It is automatically use by the LogErrors Listener.</td></tr><tr><td>1</td><td>WARN</td><td>Yellow</td><td>Use this for things that aren't ideal, but don't necessarily end the world.</td></tr><tr><td>2</td><td>INFO</td><td>Magenta</td><td>Use this for useful informative log entries.</td></tr><tr><td>3</td><td>VERBOSE</td><td>Blue</td><td>Use this for additional information.</td></tr><tr><td>4</td><td>DEBUG</td><td>Green</td><td>Use this for extra information helpful for debugging issues.</td></tr><tr><td>5</td><td>SILLY</td><td>Gray</td><td>Use this for generally extraneous entries.</td></tr></tbody></table><p>Each logger specified in your configuration will have a level associated with
it. This tells the Logger to only log entries at the specified level
<em>or below</em>.</p><h2 id="writing-logs"><a href="#writing-logs" aria-hidden="true" class="header-anchor">#</a> Writing Logs</h2><p>You can write log entries using the Logger Service. Each log entry should
have a level, a message, and optionally a source. Note that log entries
without a named source will only be logged by loggers listening for all
sources.</p><p>Example:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> LoggerSvc <span class="token operator">=</span> Carolina<span class="token punctuation">.</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'Logger'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LoggerSvc<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> level<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">&quot;This is a verbose log entry.&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LoggerSvc<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> source<span class="token punctuation">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span> level<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">&quot;This is a verbose log entry with a source.&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>When you use the <code>log</code> method of the Logger Service, each logger object (per
configuration in <code>config/logger.js</code>) will be checked to see if it should act
on it. If so, the log entry will be made according to the type and
configuration of each
specific logger.</p><h3 id="shortcut-methods"><a href="#shortcut-methods" aria-hidden="true" class="header-anchor">#</a> Shortcut Methods</h3><p>The Logger Service also has shortcut methods for each level:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// first arg is message, second is optional source. level is automatic</span>
LoggerSvc<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;A critical error has occured.&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;App&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LoggerSvc<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;There is a slight problem here.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LoggerSvc<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Here is some information.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LoggerSvc<span class="token punctuation">.</span><span class="token function">verbose</span><span class="token punctuation">(</span><span class="token string">&quot;Here is some extra information.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LoggerSvc<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Now calling myFunc()...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
LoggerSvc<span class="token punctuation">.</span><span class="token function">silly</span><span class="token punctuation">(</span><span class="token string">&quot;LOL hahahaha i don't even know what im doing...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/docs/basics/errors.html" class="prev">
          Exceptions
        </a></span><span class="next"><a href="/docs/basics/pug.html">
          Pug Templates
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/app.4c99cee3.js" defer></script><script src="/assets/js/18.2bf4752f.js" defer></script>
  </body>
</html>
