<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Routing | Carolina Documentation</title>
    <meta name="description" content="Documentation for the Carolina web framework.">
    
    
    <link rel="preload" href="/assets/css/styles.7c31eed0.css" as="style"><link rel="preload" href="/assets/js/app.7c31eed0.js" as="script"><link rel="preload" href="/assets/js/23.902995b5.js" as="script"><link rel="prefetch" href="/assets/js/1.fcb353f5.js"><link rel="prefetch" href="/assets/js/10.20490b3a.js"><link rel="prefetch" href="/assets/js/11.9b580678.js"><link rel="prefetch" href="/assets/js/12.5fefd523.js"><link rel="prefetch" href="/assets/js/13.39c744cf.js"><link rel="prefetch" href="/assets/js/14.ea7d8be9.js"><link rel="prefetch" href="/assets/js/15.c64fa988.js"><link rel="prefetch" href="/assets/js/16.713cd274.js"><link rel="prefetch" href="/assets/js/17.2322935d.js"><link rel="prefetch" href="/assets/js/18.f9b9c28c.js"><link rel="prefetch" href="/assets/js/19.3996dea9.js"><link rel="prefetch" href="/assets/js/2.7341054b.js"><link rel="prefetch" href="/assets/js/20.0ed017ce.js"><link rel="prefetch" href="/assets/js/21.03e06658.js"><link rel="prefetch" href="/assets/js/22.65de5fe7.js"><link rel="prefetch" href="/assets/js/24.243cf937.js"><link rel="prefetch" href="/assets/js/25.ef510e66.js"><link rel="prefetch" href="/assets/js/26.3dde74af.js"><link rel="prefetch" href="/assets/js/27.23a28020.js"><link rel="prefetch" href="/assets/js/28.3fbe4abc.js"><link rel="prefetch" href="/assets/js/29.bd5ece8b.js"><link rel="prefetch" href="/assets/js/3.6fb1d80f.js"><link rel="prefetch" href="/assets/js/30.349f7c13.js"><link rel="prefetch" href="/assets/js/31.9c5f7ff2.js"><link rel="prefetch" href="/assets/js/32.aeab2406.js"><link rel="prefetch" href="/assets/js/33.52f19e08.js"><link rel="prefetch" href="/assets/js/34.0e39768e.js"><link rel="prefetch" href="/assets/js/35.d8c674c0.js"><link rel="prefetch" href="/assets/js/36.b91b4bc8.js"><link rel="prefetch" href="/assets/js/37.db29dd9c.js"><link rel="prefetch" href="/assets/js/38.cc63f999.js"><link rel="prefetch" href="/assets/js/39.0ea182c5.js"><link rel="prefetch" href="/assets/js/4.daa5d832.js"><link rel="prefetch" href="/assets/js/40.c432dc4d.js"><link rel="prefetch" href="/assets/js/41.f7a29698.js"><link rel="prefetch" href="/assets/js/42.3b4aaf48.js"><link rel="prefetch" href="/assets/js/43.efb4c989.js"><link rel="prefetch" href="/assets/js/44.7ed77dea.js"><link rel="prefetch" href="/assets/js/45.5cf5c88e.js"><link rel="prefetch" href="/assets/js/46.daeb2ff8.js"><link rel="prefetch" href="/assets/js/47.faeda339.js"><link rel="prefetch" href="/assets/js/48.d3d2319e.js"><link rel="prefetch" href="/assets/js/5.d8ad5073.js"><link rel="prefetch" href="/assets/js/6.7fc4b4fa.js"><link rel="prefetch" href="/assets/js/7.94937768.js"><link rel="prefetch" href="/assets/js/8.8348ab52.js"><link rel="prefetch" href="/assets/js/9.8afb266f.js">
    <link rel="stylesheet" href="/assets/css/styles.7c31eed0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Carolina Documentation
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Documentation</a></div><div class="nav-item"><a href="/tutorials/" class="nav-link">Tutorial</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Documentation</a></div><div class="nav-item"><a href="/tutorials/" class="nav-link">Tutorial</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Getting Started</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Framework Overview</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Basics</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/docs/basics/routing.html" class="active sidebar-link">Routing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/basics/routing.html#basic-routing" class="sidebar-link">Basic Routing</a></li><li class="sidebar-sub-header"><a href="/docs/basics/routing.html#parameters" class="sidebar-link">Parameters</a></li><li class="sidebar-sub-header"><a href="/docs/basics/routing.html#route-groups" class="sidebar-link">Route Groups</a></li><li class="sidebar-sub-header"><a href="/docs/basics/routing.html#model-binding" class="sidebar-link">Model Binding</a></li></ul></li><li><a href="/docs/basics/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/docs/basics/csrf.html" class="sidebar-link">CSRF Tokens </a></li><li><a href="/docs/basics/controllers.html" class="sidebar-link">Controller Classes</a></li><li><a href="/docs/basics/requests.html" class="sidebar-link">HTTP Request Objects</a></li><li><a href="/docs/basics/responses.html" class="sidebar-link">HTTP Response Objects</a></li><li><a href="/docs/basics/template-views.html" class="sidebar-link">Template Views</a></li><li><a href="/docs/basics/session.html" class="sidebar-link">Session</a></li><li><a href="/docs/basics/validation.html" class="sidebar-link">Validation</a></li><li><a href="/docs/basics/errors.html" class="sidebar-link">Exceptions</a></li><li><a href="/docs/basics/logging.html" class="sidebar-link">Logging</a></li><li><a href="/docs/basics/pug.html" class="sidebar-link">Pug Templates</a></li><li><a href="/docs/basics/crypto.html" class="sidebar-link">The Crypto Service</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Authentication</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Advanced</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Databases</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Included Plugins</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="routing"><a href="#routing" aria-hidden="true" class="header-anchor">#</a> Routing</h1><h2 id="basic-routing"><a href="#basic-routing" aria-hidden="true" class="header-anchor">#</a> Basic Routing</h2><p>Routes are defined in <code>site/http/routes/index.js</code> and are divided into route
middleware groups.</p><p>There are two groups pre-defined: <code>browser</code> (routes designed to be accessed
by normal browsing) and <code>api</code> (routes designed to be accessed programmatically
or by AJAX calls).</p><p>A simple route, in an example <code>site/http/routes/browser.js</code> looks like this:</p><div class="language-js extra-class"><pre class="language-js"><code>exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    route<span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">func</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> data<span class="token punctuation">,</span> ctrl</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> ctrl<span class="token punctuation">.</span><span class="token function">sendText</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>This defines a simple route at root that will simply render the text
&quot;Hello, World&quot;.</p><p>Using a function like this as the <code>func</code> attribute of a route object is not
the only option. You can get the route to be handled by a
<a href="/docs/basics/controllers.html">controller</a>. This is discussed in another section.</p><h3 id="basics"><a href="#basics" aria-hidden="true" class="header-anchor">#</a> Basics</h3><h4 id="route-files"><a href="#route-files" aria-hidden="true" class="header-anchor">#</a> Route Files</h4><p>Your route files live in <code>site/http/routes/</code> and should all be exported in
various groups by the <code>index.js</code> file. The <code>index.js</code> file exports an object
mapping route group names to list of routes.</p><p>The <code>browser</code> group is preconfigured with some basic middleware designed
for standard web access.</p><p>The <code>api</code> group is preconfigured to be mounted at the prefix &quot;/api/&quot; and
has other basic middleware designed for stateless api access.</p><p>The route groups and prefixes are specified in <code>site/http/routes/index.js</code>
and route group middleware is specified in <code>config/http.js</code>.</p><h4 id="specifying-http-methods"><a href="#specifying-http-methods" aria-hidden="true" class="header-anchor">#</a> Specifying HTTP Methods</h4><p>By default, a request to a matching route will go to your controller or
handler function regardless of what method it is. However, you can list methods
that the handler applies to and other requests will be denied.</p><div class="language-js extra-class"><pre class="language-js"><code>exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>

  <span class="token comment">// other routes</span>
  
  <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">&quot;/get-only&quot;</span><span class="token punctuation">,</span> controller<span class="token punctuation">:</span> <span class="token string">&quot;SomeController&quot;</span><span class="token punctuation">,</span> methods<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">&quot;/post-only&quot;</span><span class="token punctuation">,</span> controller<span class="token punctuation">:</span> <span class="token string">&quot;SomeController&quot;</span><span class="token punctuation">,</span> methods<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">&quot;/put-only&quot;</span><span class="token punctuation">,</span> controller<span class="token punctuation">:</span> <span class="token string">&quot;SomeController&quot;</span><span class="token punctuation">,</span> methods<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;put&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">&quot;/patch-only&quot;</span><span class="token punctuation">,</span> controller<span class="token punctuation">:</span> <span class="token string">&quot;SomeController&quot;</span><span class="token punctuation">,</span> methods<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">&quot;/delete-only&quot;</span><span class="token punctuation">,</span> controller<span class="token punctuation">:</span> <span class="token string">&quot;SomeController&quot;</span><span class="token punctuation">,</span> methods<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;delete&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
  <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">&quot;/get-or-post&quot;</span><span class="token punctuation">,</span> controller<span class="token punctuation">:</span> <span class="token string">&quot;SomeController&quot;</span><span class="token punctuation">,</span> methods<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
  <span class="token comment">// this next one is the same as the default behavior without specifying methods</span>
  <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">&quot;/all-methods&quot;</span><span class="token punctuation">,</span> controller<span class="token punctuation">:</span> <span class="token string">&quot;SomeController&quot;</span><span class="token punctuation">,</span> methods<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;all&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>If &quot;all&quot; or &quot;ALL&quot; is included in the <code>methods</code> property,
the controller will apply to all methods regardless of what else is specified.
The following is redundant:</p><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">&quot;/some-route&quot;</span><span class="token punctuation">,</span> controller<span class="token punctuation">:</span> <span class="token string">&quot;SomeController&quot;</span><span class="token punctuation">,</span> methods<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre></div><h4 id="csrf"><a href="#csrf" aria-hidden="true" class="header-anchor">#</a> CSRF</h4><p>By default, any POST, PUT, PATCH, or DELETE request will be rejected without a
CSRF token.</p><p>You can generally include a CSRF token in a pug template like this
(assuming you left <code>templates/carolina/</code> alone)</p><div class="language-pug extra-class"><pre class="language-pug"><code><span class="token keyword">include /carolina/http/mixins</span>

<span class="token tag">form</span>
  <span class="token mixin"><span class="token name function">+csrfToken</span><span class="token punctuation">(</span>locals<span class="token punctuation">.</span>request<span class="token punctuation">)</span></span>
</code></pre></div><p>See the docs on <a href="/docs/basics/csrf.html">CSRF</a> and
<a href="/docs/basics/views.html">views and templates</a> for more information.</p><h3 id="redirection"><a href="#redirection" aria-hidden="true" class="header-anchor">#</a> Redirection</h3><p>You can setup a redirect like this:</p><div class="language-js extra-class"><pre class="language-js"><code>exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>
  
  <span class="token comment">// other routes</span>
  
  <span class="token punctuation">{</span>
    route<span class="token punctuation">:</span> <span class="token string">&quot;/from&quot;</span><span class="token punctuation">,</span>
    redirectTo<span class="token punctuation">:</span> <span class="token string">&quot;/api/to&quot;</span><span class="token punctuation">,</span>
    status<span class="token punctuation">:</span> <span class="token number">301</span><span class="token punctuation">,</span>
    methods<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>Any GET request for &quot;/api/from&quot; (assuming this definition is in <code>api.js</code>)
will be redirected to &quot;/to&quot; with status 301
(other methods may continue if a later route handles &quot;/from&quot;).</p><p>The <code>status</code> property is optional and defaults to 302.</p><p>The <code>redirectTo</code> property should be FULL url from root (or a relative url
such as &quot;./to&quot; or &quot;../to&quot;, etc).</p><h3 id="template-views"><a href="#template-views" aria-hidden="true" class="header-anchor">#</a> Template Views</h3><p>As will be covered in later sections, you can render views easily from within
a controller or handler function. However, if all you need to do is render
a pug template with automatically included data and data that can be easily
specified in your routes list, you can use this shortcut:</p><div class="language-js extra-class"><pre class="language-js"><code>exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>
  
  <span class="token comment">// other routes</span>
  
  <span class="token punctuation">{</span>
    route<span class="token punctuation">:</span> <span class="token string">&quot;/some-route&quot;</span><span class="token punctuation">,</span>
    template<span class="token punctuation">:</span> <span class="token string">&quot;some-template&quot;</span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      number<span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>In the above example, the template <code>templates/some-template.pug</code> will
be rendered with your data object, plus automatic values.</p><p>Note that app configuration is automatically made available to pug templates
as <code>locals.config</code> and if a user is logged in and extracted by middleware the
logged in user is available as <code>locals.currentUser</code>
and <code>locals.isLoggedIn</code> will be set to true.
This is done even if you don't use a controller.
You should not use those
values in <code>data</code> or they will overwritten.</p><h2 id="parameters"><a href="#parameters" aria-hidden="true" class="header-anchor">#</a> Parameters</h2><p>You can use route parameters to capture part of the route as parameters.
The variable will be stored in <code>request.params</code>.</p><p>Example:</p><div class="language-js extra-class"><pre class="language-js"><code>exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  
  <span class="token comment">// other routes</span>
  
  <span class="token punctuation">{</span>
    route<span class="token punctuation">:</span> <span class="token string">&quot;/user/:userId&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">func</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> data<span class="token punctuation">,</span> ctrl</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> ctrl<span class="token punctuation">.</span><span class="token function">sendText</span><span class="token punctuation">(</span><span class="token string">&quot;User ID: &quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>You can have multiple parameters:</p><div class="language-js extra-class"><pre class="language-js"><code>exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  
  <span class="token comment">// other routes</span>
  
  <span class="token punctuation">{</span>
    route<span class="token punctuation">:</span> <span class="token string">&quot;/posts/:postId/comments/:commentId&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">func</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> data<span class="token punctuation">,</span> ctrl</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      
      <span class="token keyword">let</span> postId <span class="token operator">=</span> request<span class="token punctuation">.</span>params<span class="token punctuation">.</span>postId<span class="token punctuation">;</span>
      <span class="token keyword">let</span> commentId <span class="token operator">=</span> request<span class="token punctuation">.</span>params<span class="token punctuation">.</span>commentId<span class="token punctuation">;</span>
      <span class="token comment">// do stuff</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="regex-params"><a href="#regex-params" aria-hidden="true" class="header-anchor">#</a> Regex Params</h3><p>You can force a parameter to only match a particular regular expression
by putting a regex in parentheses after the parameter name.</p><p>Example:</p><div class="language-js extra-class"><pre class="language-js"><code>exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  
  <span class="token comment">// other routes</span>
  
  <span class="token punctuation">{</span>
    route<span class="token punctuation">:</span> <span class="token string">&quot;/user/:userId([0-9]+)&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">func</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> data<span class="token punctuation">,</span> ctrl</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> ctrl<span class="token punctuation">.</span><span class="token function">sendText</span><span class="token punctuation">(</span><span class="token string">&quot;User ID: &quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>In the above example, the &quot;userId&quot; parameter is forced to be a string of digits.</p><h2 id="route-groups"><a href="#route-groups" aria-hidden="true" class="header-anchor">#</a> Route Groups</h2><h3 id="middleware-groups"><a href="#middleware-groups" aria-hidden="true" class="header-anchor">#</a> Middleware Groups</h3><p>All routes belong to middleware groups. The file <code>site/http/routes/index.js</code>
exports routes grouped by middleware group name. By default, the groups
<code>browser</code> (for stateful routes accessed by the browser or AJAX calls from the
browser) and <code>api</code> (for stateless routes designed for consumption from
possibly outside the browser environement altogehter) are preset.</p><p>The middleware that actually gets applied routes in
each group are defined under
<code>config/http.js</code>.</p><h3 id="route-prefixing"><a href="#route-prefixing" aria-hidden="true" class="header-anchor">#</a> Route Prefixing</h3><p>Routes can be placed into a prefix group. This is done by default with your
API routes in <code>site/http/routes/index.js</code>, but this can be done at every level.
The sub routes inherit the group in which the route prefix is defined.</p><div class="language-js extra-class"><pre class="language-js"><code>exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>

  <span class="token comment">// other routes</span>
  
  <span class="token punctuation">{</span>
    route<span class="token punctuation">:</span> <span class="token string">&quot;/route-prefix&quot;</span><span class="token punctuation">,</span>
    subs<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> route<span class="token punctuation">:</span> <span class="token string">&quot;/route-suffix&quot;</span><span class="token punctuation">,</span> controller<span class="token punctuation">:</span> <span class="token string">&quot;SomeController&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// more normal route definitions</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>  
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>In the above example, the route <code>/route-prefix/route-suffix</code> will be bound
to &quot;SomeController&quot;.</p><h2 id="model-binding"><a href="#model-binding" aria-hidden="true" class="header-anchor">#</a> Model Binding</h2><p>You can use custom middleware to override request parameters, and there is
built-in middleware, <code>ModelExtractionMiddleware</code>,
that you can use to bind a request parameter to a model
such that the model instance will be made available to the controller as
a parameter.</p><p>You will have to specify the model and which param the middleware should look
for the id in. If there is no matching object, the param will be <code>null</code>.</p><div class="language-js extra-class"><pre class="language-js"><code>exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span>
  
  <span class="token comment">// other routes</span>
  
  <span class="token punctuation">{</span>
    route<span class="token punctuation">:</span> <span class="token string">&quot;/user/:user&quot;</span><span class="token punctuation">,</span>
    controller<span class="token punctuation">:</span> <span class="token string">&quot;SomeController&quot;</span><span class="token punctuation">,</span>
    middleware<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ModelExtractionMiddleware&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">{</span> model<span class="token punctuation">:</span> <span class="token string">&quot;User&quot;</span><span class="token punctuation">,</span> param<span class="token punctuation">:</span> <span class="token string">'user'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>Using this example, in a request to <code>/user/2</code>, the User with the ID of 2 will
be made available as <code>request.params.user</code> inside of <code>SomeController</code>.</p></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/docs/overview/services.html" class="prev">
          Framework Services &amp; Class Libraries
        </a></span><span class="next"><a href="/docs/basics/middleware.html">
          Middleware
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/app.7c31eed0.js" defer></script><script src="/assets/js/23.902995b5.js" defer></script>
  </body>
</html>
