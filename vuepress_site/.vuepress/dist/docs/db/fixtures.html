<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fixtures | Carolina Documentation</title>
    <meta name="description" content="Documentation for the Carolina web framework.">
    
    
    <link rel="preload" href="/assets/css/styles.1d2d3735.css" as="style"><link rel="preload" href="/assets/js/app.1d2d3735.js" as="script"><link rel="preload" href="/assets/js/28.26974ced.js" as="script"><link rel="prefetch" href="/assets/js/1.f05c9cba.js"><link rel="prefetch" href="/assets/js/10.bac22d9b.js"><link rel="prefetch" href="/assets/js/11.3d8fb5fe.js"><link rel="prefetch" href="/assets/js/12.15d64a99.js"><link rel="prefetch" href="/assets/js/13.025e71f2.js"><link rel="prefetch" href="/assets/js/14.fd7a08c1.js"><link rel="prefetch" href="/assets/js/15.e1bc1756.js"><link rel="prefetch" href="/assets/js/16.5770cf46.js"><link rel="prefetch" href="/assets/js/17.853ce496.js"><link rel="prefetch" href="/assets/js/18.971e2150.js"><link rel="prefetch" href="/assets/js/19.c761800c.js"><link rel="prefetch" href="/assets/js/2.988f372d.js"><link rel="prefetch" href="/assets/js/20.4e4bef1c.js"><link rel="prefetch" href="/assets/js/21.b3aaaedf.js"><link rel="prefetch" href="/assets/js/22.1bb76f3c.js"><link rel="prefetch" href="/assets/js/23.3d27ba26.js"><link rel="prefetch" href="/assets/js/24.0bac6e09.js"><link rel="prefetch" href="/assets/js/25.c2b28b9a.js"><link rel="prefetch" href="/assets/js/26.0d288857.js"><link rel="prefetch" href="/assets/js/27.98f9eff3.js"><link rel="prefetch" href="/assets/js/29.6b34c182.js"><link rel="prefetch" href="/assets/js/3.8f49772c.js"><link rel="prefetch" href="/assets/js/30.3e9f8855.js"><link rel="prefetch" href="/assets/js/31.f88a0e4e.js"><link rel="prefetch" href="/assets/js/32.cd87dfeb.js"><link rel="prefetch" href="/assets/js/33.b61fa559.js"><link rel="prefetch" href="/assets/js/34.c116294f.js"><link rel="prefetch" href="/assets/js/35.2f210b65.js"><link rel="prefetch" href="/assets/js/36.cb8e5677.js"><link rel="prefetch" href="/assets/js/37.0de8ac6f.js"><link rel="prefetch" href="/assets/js/38.cb46e1ce.js"><link rel="prefetch" href="/assets/js/39.b4986129.js"><link rel="prefetch" href="/assets/js/4.6855463a.js"><link rel="prefetch" href="/assets/js/40.a060c3fb.js"><link rel="prefetch" href="/assets/js/41.e48da89d.js"><link rel="prefetch" href="/assets/js/42.3cf3cf2d.js"><link rel="prefetch" href="/assets/js/43.74393af5.js"><link rel="prefetch" href="/assets/js/44.9d05ba51.js"><link rel="prefetch" href="/assets/js/5.00dd7cd0.js"><link rel="prefetch" href="/assets/js/6.9ca81a96.js"><link rel="prefetch" href="/assets/js/7.24dcfe4e.js"><link rel="prefetch" href="/assets/js/8.f67b2fab.js"><link rel="prefetch" href="/assets/js/9.85b5be06.js">
    <link rel="stylesheet" href="/assets/css/styles.1d2d3735.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Carolina Documentation
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Documentation</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Documentation</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Getting Started</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Framework Overview</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Basics</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Authentication</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Advanced</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Databases</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/docs/db/db-service.html" class="sidebar-link">The DB Service</a></li><li><a href="/docs/db/schemas.html" class="sidebar-link">Schemas and Fields</a></li><li><a href="/docs/db/models.html" class="sidebar-link">Models</a></li><li><a href="/docs/db/queries.html" class="sidebar-link">Database Queries</a></li><li><a href="/docs/db/fixtures.html" class="active sidebar-link">Fixtures</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/db/fixtures.html#writing-fixtures" class="sidebar-link">Writing Fixtures</a></li><li class="sidebar-sub-header"><a href="/docs/db/fixtures.html#executing-fixtures" class="sidebar-link">Executing Fixtures</a></li></ul></li><li><a href="/docs/db/relations.html" class="sidebar-link">Reference Fields</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Included Plugins</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="fixtures"><a href="#fixtures" aria-hidden="true" class="header-anchor">#</a> Fixtures</h1><p>The Database Service can reference <code>.yml</code> files defining objects to be loaded
into the database. These files are known as Fixtures. Like the class libraries
that many Carolina Services maintain, they are assigned a name and referenced
that way. The Fixture named &quot;Main&quot; is defined in the starter project in
<code>site/db/fixtures/main.yml</code> and its path is exported by
<code>site/db/fixtures/index.js</code>.</p><p>Fixtures define groups of objects that can be loaded into the database. They
can be tracked so that they are not added multiple times, and can be
removed when a Fixture is undone.</p><p></p><div class="table-of-contents"><ul><li><a href="#writing-fixtures">Writing Fixtures</a><ul><li><a href="#including-other-fixtures">Including Other Fixtures</a></li><li><a href="#ref">ref</a></li></ul></li><li><a href="#executing-fixtures">Executing Fixtures</a></li></ul></div><p></p><h2 id="writing-fixtures"><a href="#writing-fixtures" aria-hidden="true" class="header-anchor">#</a> Writing Fixtures</h2><p>Your Fixtures should go in the <code>site/db/fixtures/</code> directory. Each should be
a YAML file with <code>.yml</code> extension. The existing files there can serve as
examples, but this section will cover some of the concepts.</p><p>The Fixture file can have the following properties:</p><ul><li><code>exec</code>: A list of groups of objects, defined in the same file, that should be added to the database in order.</li><li><code>groups</code>: A set of groups, each which lists objects that should be added to the database in order.</li><li><code>require</code>: A list of Fixture names, referencing other Fixtures that should be loaded first.</li></ul><p>Note that since <code>exec</code> references groups by name, if the <code>exec</code> property exists
then the <code>groups</code> property must exist and have the specified groups present.
Here is a basic example:</p><div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">groups</span><span class="token punctuation">:</span>
  <span class="token key atrule">group1</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">model</span><span class="token punctuation">:</span> MyCustomModel
      <span class="token key atrule">ref</span><span class="token punctuation">:</span> group1object1
      <span class="token key atrule">fields</span><span class="token punctuation">:</span>
        <span class="token key atrule">field1</span><span class="token punctuation">:</span> value1
        <span class="token key atrule">field2</span><span class="token punctuation">:</span> value2
  <span class="token key atrule">group2</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">model</span><span class="token punctuation">:</span> MyCustomModel
      <span class="token key atrule">ref</span><span class="token punctuation">:</span> group2object1
      <span class="token key atrule">fields</span><span class="token punctuation">:</span>
        <span class="token key atrule">field1</span><span class="token punctuation">:</span> value1
        <span class="token key atrule">field2</span><span class="token punctuation">:</span> value2
        
<span class="token key atrule">exec</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> group1
</code></pre></div><p>In the above example, the object listed in <code>group1</code> would be created and added
to the database. The object belonging to <code>group2</code> would NOT be loaded, since
the group is not specified in <code>exec</code>. This feature allows you to develop
fixtures without having them be executed until you add the group name to
the <code>exec</code> property.</p><p>Once a group is loaded, the DB Service tracks that the group was loaded and
will not the load the group again (unless unloaded).</p><h3 id="including-other-fixtures"><a href="#including-other-fixtures" aria-hidden="true" class="header-anchor">#</a> Including Other Fixtures</h3><p>Each Fixture file should be referenced by a name in <code>site/db/fixtures/index.js</code>,
which should export an object mapping names to full file paths to Fixture files.
Like some of the class types associated with Carolina Services (ie Controllers,
Models, etc), avoid name collisions.</p><p>From within a certain fixture, you can reference another fixture that must
be loaded before the current one. You don't need to have anything else in
a fixture. You could use a fixture with only a <code>require</code> property to list
other fixtures you want loaded. The fixture &quot;Main&quot;, defined in
<code>site/db/fixtures/main.yml</code> is an example. When you run the fixture &quot;Main&quot;,
the other fixtures reference will be checked and loaded.</p><h3 id="ref"><a href="#ref" aria-hidden="true" class="header-anchor">#</a><code>ref</code></h3><p>The <code>ref</code> property on specific objects in a Fixture is optional, but it is
very helpful for allowing Fixtures to be removed.
The <code>ref</code> name should be unique
within the group. When a Fixture is unloaded, anything that had a <code>ref</code> property
will be deleted. Objects that are not given</p><h2 id="executing-fixtures"><a href="#executing-fixtures" aria-hidden="true" class="header-anchor">#</a> Executing Fixtures</h2><p>A good idea for using Fixtures is to list a bunch of standard fixtures
in the <code>require</code> property of the Fixture &quot;Main&quot;, and then load those Fixtures
simply by loading &quot;Main&quot;.</p><p>To load a Fixture using the CLI:</p><div class="language- extra-class"><pre class="language-text"><code>node . load-data Main
</code></pre></div><p>If you want to remove all the data from a Fixture, you can unload it like this:</p><div class="language- extra-class"><pre class="language-text"><code>node . load-data --unload Main
</code></pre></div><p>This means you could remove all data (as long as <code>ref</code> properties are used)
and re-seed the data base like this:</p><div class="language- extra-class"><pre class="language-text"><code>node . load-data --unload Main
node . load-data Main
</code></pre></div></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/docs/db/queries.html" class="prev">
          Database Queries
        </a></span><span class="next"><a href="/docs/db/relations.html">
          Reference Fields
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/app.1d2d3735.js" defer></script><script src="/assets/js/28.26974ced.js" defer></script>
  </body>
</html>
